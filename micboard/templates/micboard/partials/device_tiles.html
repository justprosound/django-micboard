<div class="row g-3" id="device-tiles" role="list" aria-label="Device tiles">
  {% for unit in units %}
  <div class="col-md-4 col-lg-3" role="listitem">
    <div class="card device-tile" style="background:#fff;color:#111;border:1px solid #333;">
      <div class="card-body">
        <h2 class="card-title h6" style="color:#111;">{{ unit.name }}</h2>
        <p class="card-text small" style="color:#444;">{{ unit.chassis.name }}</p>

        {% if unit.battery_level %}
        <div class="mb-2">
          <span style="font-size:0.95em;">Battery</span>
          <div class="progress" style="height: 8px;background:#444;">
            <div class="progress-bar" style="width: {{ unit.battery_level }}%;background-color:{% if unit.battery_level < 20 %}#a60000{% elif unit.battery_level < 50 %}#f7b500{% else %}#005a00{% endif %};color:#fff;" aria-label="Battery at {{ unit.battery_level }} percent"></div>
          </div>
          <span class="small" style="color:#111;">{{ unit.battery_level }}%</span>
        </div>
        {% endif %}

        {% if unit.rf_level %}
        <div class="mb-2">
          <span style="font-size:0.95em;">RF Signal</span>
          <div class="progress" style="height: 8px;background:#444;">
            <div class="progress-bar" style="width: {{ unit.rf_level }}%;background-color:{% if unit.rf_level < 30 %}#a60000{% elif unit.rf_level < 70 %}#f7b500{% else %}#005a00{% endif %};color:#fff;" aria-label="RF signal at {{ unit.rf_level }} percent"></div>
          </div>
          <span class="small" style="color:#111;">{{ unit.rf_level }}%</span>
        </div>
        {% endif %}

        {% if unit.audio_level %}
        <div class="mb-2">
          <span style="font-size:0.95em;">Audio</span>
          <div class="progress" style="height: 8px;background:#444;">
            <div class="progress-bar" style="width: {{ unit.audio_level }}%;background-color:#005a8c;color:#fff;" aria-label="Audio at {{ unit.audio_level }} percent"></div>
          </div>
          <span class="small" style="color:#111;">{{ unit.audio_level }}%</span>
        </div>
        {% endif %}

        <div class="mt-2">
          <span class="badge" style="background-color:{% if unit.is_active %}#005a00{% else %}#333{% endif %};color:#fff;">
            {% if unit.is_active %}Active{% else %}Inactive{% endif %}
          </span>
        </div>
      </div>
    </div>
  </div>
  {% empty %}
  <div class="col-12">
    <p class="text-muted text-center" style="color:#444;">No devices found</p>
  </div>
  {% endfor %}
</div>

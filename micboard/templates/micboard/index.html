{% extends 'micboard/base.html' %}
{% load static %}

{% block content %}
<div class="container-fluid">
    <section id="hud" class="hud-overlay">
      <div class="hud-content">
        <section class="hud-section">
          <h2>Keyboard Shortcuts</h2>
          <ul class="shortcut-list">
            <li><kbd>?</kbd> - Show keyboard shortcuts</li>
            <li><kbd>0</kbd> - Show all slots</li>
            <li><kbd>1</kbd>...<kbd>9</kbd> - Load group</li>
            <li><kbd>d</kbd> - Start demo mode</li>
            <li><kbd>e</kbd> - Open group editor</li>
            <li><kbd>t</kbd> - Toggle TV view</li>
            <li><kbd>i</kbd> - Change tv display mode</li>
            <li><kbd>f</kbd> - Toggle fullscreen</li>
            <li><kbd>g</kbd> - Toggle image backgrounds</li>
            <li><kbd>v</kbd> - Toggle video backgrounds</li>
            <li><kbd>n</kbd> - Extended Name editor</li>
            <li><kbd>s</kbd> - Device configuration editor</li>
            <li><kbd>q</kbd> - Show QR code</li>
            <li><kbd>esc</kbd> - reload micboard</li>
          </ul>
        </section>
        <section class="hud-section">
          <h2>Color Guide</h2>
          <div class="color-guide-grid">
            <div class="color-guide-item">
              <div class="color-box good"></div>
              <h3>Good</h3>
              <p>Mic ON.  4 - 5 Battery Bars.</p>
            </div>
            <div class="color-guide-item">
              <div class="color-box previously-good"></div>
              <h3>Previously Good</h3>
              <p>Mic OFF.  4 - 5 Battery Bars.</p>
            </div>
            <div class="color-guide-item">
              <div class="color-box replace"></div>
              <h3>Replace</h3>
              <p>Mic ON.  3 Battery Bars.</p>
            </div>
            <div class="color-guide-item">
              <div class="color-box previously-replace"></div>
              <h3>Previously Replace</h3>
              <p>Mic OFF.  3 Battery Bars.</p>
            </div>
            <div class="color-guide-item">
              <div class="color-box critical"></div>
              <h3>Critical</h3>
              <p>Mic ON.  1 - 2 Battery Bars.</p>
            </div>
            <div class="color-guide-item">
              <div class="color-box previously-critical"></div>
              <h3>Previously Critical</h3>
              <p>Mic OFF.  1 - 2 Battery Bars.</p>
            </div>
            <div class="color-guide-item">
              <div class="color-box unknown"></div>
              <h3>Unknown</h3>
              <p>Micboard doesn't make battery assumptions once a mic is off for over 30 minutes.</p>
            </div>
            <div class="color-guide-item">
              <div class="color-box rx-com-error"></div>
              <h3>RX COM Error</h3>
              <p>Micboard can't connect to the device.</p>
            </div>
            <div class="color-guide-item">
              <div class="color-box audio-peak"></div>
              <h3>Audio Peak</h3>
              <p>Input peak.</p>
            </div>
          </div>
        </section>
      </div>
      <button id="hud-button" class="button">Close</button>
    </section>
    <div id="container" class="row">
      <aside class="sidebar-nav col-md-3 col-lg-2">
        <h1 id='sidebarTitle'>Group 4</h1>
        <div class="slot-prototype-list" id="eslotlist">

        </div>
        <div class="sidebar-controls">
          <input type="text" id="groupTitle" placeholder="title" class="form-control">
          <div class="checkbox-group form-check">
            <div class="checkbox-item">
              <span>Hide inactive charts</span>
            </div>

            <div class="checkbox-item">
              <input type="checkbox" id="chartCheck" class="form-check-input">
            </div>
          </div>

          <button type="button" id="editorSave" class="btn btn-primary">Save</button>
          <button type="button" id="editorClose" class="btn btn-secondary">Close</button>
          <button type="button" id="editorClear" class="btn btn-danger">Clear</button>
        </div>
      </aside>
      <div id="micboard" class="col-md-9 col-lg-10">

      </div>

      <section class="message-board col-12">
        <h1>Connection Error!</h1>
        <p>Could not connect to the micboard server. Please refresh the page.</p>
      </section>
      <section class="settings col-12">

        <div class="settings-content row">

          <section id="cfg-discovered-col" class="settings-column col-md-6">
            <div class="settings-header">
              <h3>Discovered Devices</h3>
            </div>

            <div id="discovered_list" class="settings-list"></div>
            <div class="settings-actions">
              <div class="settings-action-group">
                <div class="settings-action-item">
                  <button id="add-discovered" class="btn btn-primary">Add All Discovered Devices</button>
                </div>
              </div>
            </div>
          </section>

          <section id="cfg-slot-col" class="settings-column col-md-6">
            <div class="settings-header">
              <h3>Slot Configuration</h3>
            </div>
            <div id="editor_holder" class="settings-editor"></div>
            <div class="settings-actions">
              <div class="settings-action-group">
                <div class="settings-action-item">
                  <button id="clear-config" class="btn btn-danger">Clear</button>
                </div>
                <div class="settings-action-item">
                  <button id="add-config-row" class="btn btn-secondary">Add Row</button>
                </div>
                <div class="settings-action-item">
                  <button id="save" class="btn btn-primary">Save</button>
                </div>
              </div>
            </div>
          </section>
        </div>

        <div class="settings-spacer"></div>
      </section>
      <nav class="main-nav col-12">
        <div id="navbar-content">
          <ul id="grouplist">
            <li><h4><a href='/'>micboard</a></h4></li>
            <li><a id="go-group-0">all devices</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown">Manufacturers</a>
              <ul class="dropdown-menu">
                {% for manufacturer in manufacturers %}
                  <li><a class="dropdown-item" href="{% url 'micboard:index' %}?manufacturer={{ manufacturer.code }}">{{ manufacturer.name }}</a></li>
                {% endfor %}
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown">Buildings</a>
              <ul class="dropdown-menu">
                {% for building in buildings %}
                  <li><a class="dropdown-item" href="{% url 'micboard:building_view' building_name=building %}">{{ building }}</a></li>
                {% endfor %}
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown">Rooms</a>
              <ul class="dropdown-menu">
                {% for room in rooms %}
                  <li><a class="dropdown-item" href="{% url 'micboard:room_view' room_name=room %}">{{ room }}</a></li>
                {% endfor %}
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown">Users</a>
              <ul class="dropdown-menu">
                {% for user in users %}
                  <li><a class="dropdown-item" href="{% url 'micboard:user_view' username=user.username %}">{{ user.username }}</a></li>
                {% endfor %}
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown">Alerts</a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{% url 'micboard:alerts' %}">All Alerts</a></li>
                {% for alert_type_code, alert_type_name in alert_types %}
                  <li><a class="dropdown-item" href="{% url 'micboard:alerts' %}?type={{ alert_type_code }}">{{ alert_type_name }}</a></li>
                {% endfor %}
              </ul>
            </li>

            <li><a id="go-extended" href="#">edit extended names</a></li>
            <li><a id="go-config">edit config</a></li>
            <li><a id="go-groupedit" href="#">edit group</a></li>
            <li>
              <ul>
                <li><a id="go-group-1">1:</a></li>
                <li><a id="go-group-2">2:</a></li>
                <li><a id="go-group-3">3:</a></li>
                <li><a id="go-group-4">4:</a></li>
                <li><a id="go-group-5">5:</a></li>
                <li><a id="go-group-6">6:</a></li>
                <li><a id="go-group-7">7:</a></li>
                <li><a id="go-group-8">8:</a></li>
                <li><a id="go-group-9">9:</a></li>
              </ul>
            </li>
          </ul>
        </div>
        <button type="button" id="navbar-toggle" class="btn btn-primary">
          <span></span>
        </button>
      </nav>
    </div>
    <template id="column-template">
      <div class="micboard-column">
        <div class="mic_name">
          <p class="mic_id"></p>
          <p class="name"></p>
        </div>
        <div class="electrode"></div>

        <div class="info-drawer">
          <div class="battery-bars">
            <div class="battery-bar battery-bar-1"></div>
            <div class="battery-bar battery-bar-2"></div>
            <div class="battery-bar battery-bar-3"></div>
            <div class="battery-bar battery-bar-4"></div>
            <div class="battery-bar battery-bar-5"></div>
          </div>
          <div class="chartzone">
            <p class="runtime"></p>
            <p class="offset"></p>
            <canvas class="slotgraph"></canvas>
            <p class="quality"></p>
            <p class="frequency"></p>
          </div>

          <div class="errorzone">
            <p class="errortype">RX COM Error</p>
            <p class="ip"></p>
            <p class="rxinfo"></p>
          </div>

          <div class="editzone">
            <div class="form-group">
              <div class="form-field">
                <input type="text" class="form-control ext-id" aria-label="Default" aria-describedby="inputGroup-sizing-" autocomplete="off" placeholder="ID">
              </div>
              <div class="form-field">
                <input type="text" class="form-control ext-name" aria-label="Default" aria-describedby="inputGroup-sizing-" autocomplete="off" placeholder="Name">
              </div>
            </div>
          </div>

          <div class="diversity">
            <div class="diversity-bar"></div>
            <div class="diversity-bar"></div>
          </div>
        </div>
      </div>
    </template>

    <template id="save-template">
      <div class="micboard-column" id="paste-box">
        <div class="form-group">
          <div class="form-field">
            <textarea class="form-control" id="bulkbox" rows="3"></textarea>
          </div>
        </div>
        <div class="form-group">
          <div class="form-field">
            <button type="button" class="btn btn-success btn-block" id="bulk-name-loader">Load Bulk Names</button>
          </div>
        </div>
      </div>
      <div class="micboard-column" id="save-box">
        <div class="form-group">
          <div class="form-field">
            <button type="button" class="btn btn-success btn-block" id="slotSave">Save</button>
          </div>
        </div>

        <div class="form-group">
          <div class="form-field">
            <button type="button" class="btn btn-danger btn-block" id="clear-id">Clear IDs</button>
          </div>
          <div class="form-field">
            <button type="button" class="btn btn-warning btn-block" id="clear-name">Clear Names</button>
          </div>
        </div>
      </div>
    </template>

    <template id="config-slot-template">
      <div class="form-group cfg-row">
        <div class="form-field align-center cfg-row-form">
          <span></span>
        </div>
        <div class="form-field slot-number text-center cfg-row-form"><label class="form-label"></label></div>

        <div class="form-field del-btn cfg-row-form">
          <button type="button" class="btn btn-danger"><span aria-hidden="true">&times;</span></button>
        </div>

        <div class="form-field cfg-row-form">
          <input type="text" class="form-control cfg-ip" placeholder="IP Address">
        </div>

        <div class="form-field cfg-row-form">
          <select class="form-select cfg-type">
            <option></option>
            <option>axtd</option>
            <option>ulxd</option>
            <option>qlxd</option>
            <option>uhfr</option>
            <option>p10t</option>
            <option>offline</option>
          </select>
        </div>

        <div class="form-field cfg-row-form">
          <select class="form-select cfg-channel">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
          </select>
        </div>

      </div>
    </template>
</div>
{% endblock %}

{% block javascript %}
    <script>
      window.dataURL = "{% url 'micboard:data' %}";
      window.slotURL = "{% url 'micboard:slot' %}";
      window.configURL = "{% url 'micboard:config' %}";
      window.groupURL = "{% url 'micboard:group' %}";
    </script>
    <script src="{% static 'micboard/app.js' %}"></script>
{% endblock %}
